(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{447:function(t,a,v){"use strict";v.r(a);var _=v(2),s=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#基于成本的查询优化"}},[t._v("基于成本的查询优化")]),a("ul",[a("li",[a("a",{attrs:{href:"#单表查询成本"}},[t._v("单表查询成本")])]),a("li",[a("a",{attrs:{href:"#连接查询成本"}},[t._v("连接查询成本")])]),a("li",[a("a",{attrs:{href:"#小结"}},[t._v("小结")])])])]),a("li",[a("a",{attrs:{href:"#子查询优化"}},[t._v("子查询优化")])])])]),t._v("\n查询优化大致分为两个大块："),a("p"),t._v(" "),a("ul",[a("li",[t._v("基于成本的查询优化")]),t._v(" "),a("li",[t._v("子查询优化")])]),t._v(" "),a("h2",{attrs:{id:"基于成本的查询优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基于成本的查询优化"}},[t._v("#")]),t._v(" 基于成本的查询优化")]),t._v(" "),a("p",[t._v("基于成本的查询优化可以分为两个部分")]),t._v(" "),a("ul",[a("li",[t._v("单表查询成本计算")]),t._v(" "),a("li",[t._v("连接查询成本计算")])]),t._v(" "),a("h3",{attrs:{id:"单表查询成本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单表查询成本"}},[t._v("#")]),t._v(" 单表查询成本")]),t._v(" "),a("p",[t._v("mysql在执行一条单表查询语句之前，查询优化器会执行以下步骤：")]),t._v(" "),a("ol",[a("li",[t._v("根据搜索条件，找出所有可能使用的索引")]),t._v(" "),a("li",[t._v("计算全表扫描的代价")]),t._v(" "),a("li",[t._v("计算使用不同索引执行查询的代价")]),t._v(" "),a("li",[t._v("对比各种执行方案，找出成本最低的方案执行")])]),t._v(" "),a("h3",{attrs:{id:"连接查询成本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接查询成本"}},[t._v("#")]),t._v(" 连接查询成本")]),t._v(" "),a("p",[t._v("连接查询总成本 = 单次访问驱动表的成本+驱动表扇出值*单次访问被驱动表的成本")]),t._v(" "),a("p",[t._v("使用join buff存放驱动表记录 加快连接查询")]),t._v(" "),a("h3",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("所以基于成本的查询优化，对于单表来说，需要设定合适的索引，而对于连接查询来说，除了设置合适的索引，还要选择合适的驱动表。")]),t._v(" "),a("h2",{attrs:{id:"子查询优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子查询优化"}},[t._v("#")]),t._v(" 子查询优化")]),t._v(" "),a("p",[t._v("子查询物化")])])}),[],!1,null,null,null);a.default=s.exports}}]);